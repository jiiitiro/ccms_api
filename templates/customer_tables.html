{% include "header.html" %}
{% include "nav_bar.html" %}
{% include "side_nav_bar.html" %}

            <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid px-4">
                        <h1 class="mt-4">Customer Subsystem</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item"><a href="{{ url_for('superadmin_api.dashboard_superadmin') }}">Dashboard</a></li>
                            <li class="breadcrumb-item active">Customer</li>
                        </ol>
                        <hr>
                        <br>
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-table me-1"></i>
                                User - Customer
                            </div>
                            <div class="card-body">
                                <table id="datatablesSimple">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Role</th>
                                            <th>Email Confirm</th>
                                            <th>Active</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tfoot>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Role</th>
                                            <th>Email Confirm</th>
                                            <th>Active</th>
                                            <th>Action</th>
                                        </tr>
                                    </tfoot>
                                    <tbody>
                                        {% for entry in result|sort(attribute='login_id') %}
                                            <tr>
                                                <td>{{ entry.login_id }}</td>
                                                <td>{{ entry.name }}</td>
                                                <td>{{ entry.email }}</td>
                                                <td>{{ entry.role }}</td>
                                                <td>{{ entry.email_confirm }}</td>
                                                <td>{{ entry.is_active }}</td>
                                                <td>
                                                    {% if entry.is_active %}
                                                        <button onclick="confirmDeactivate('{{ entry.login_id }}')" class="btn btn-danger">Deactivate</button>
                                                    {% else %}
                                                        <button onclick="confirmActivate('{{ entry.login_id }}')" class="btn btn-success">Activate</button>
                                                    {% endif %}
                                                </td>
                                            </tr>
                                            <script>
                                                function confirmDeactivate(login_id) {
                                                    Swal.fire({
                                                        title: 'Are you sure?',
                                                        text: "You are about to deactivate this account.",
                                                        icon: 'warning',
                                                        showCancelButton: true,
                                                        confirmButtonColor: '#d33',
                                                        cancelButtonColor: '#3085d6',
                                                        confirmButtonText: 'Yes, deactivate it!'
                                                    }).then((result) => {
                                                        if (result.isConfirmed) {
                                                            // Create a form element
                                                            var form = document.createElement('form');

                                                            // Set form attributes
                                                            form.method = 'POST';
                                                            form.action = "/superadmin/customer/deactivate/" + login_id;

                                                            // Append a hidden input for login_id
                                                            var loginIdInput = document.createElement('input');
                                                            loginIdInput.type = 'hidden';
                                                            loginIdInput.name = 'login_id';
                                                            loginIdInput.value = login_id;
                                                            form.appendChild(loginIdInput);

                                                            // Append the form to the document body
                                                            document.body.appendChild(form);

                                                            // Submit the form
                                                            form.submit();
                                                        }
                                                    });
                                                }

                                                function confirmActivate(login_id) {
                                                    Swal.fire({
                                                        title: 'Are you sure?',
                                                        text: "You are about to activate this account.",
                                                        icon: 'warning',
                                                        showCancelButton: true,
                                                        confirmButtonColor: '#3085d6',
                                                        cancelButtonColor: '#d33',
                                                        confirmButtonText: 'Yes, activate it!'
                                                    }).then((result) => {
                                                        if (result.isConfirmed) {
                                                            // Create a form element
                                                            var form = document.createElement('form');

                                                            // Set form attributes
                                                            form.method = 'POST';
                                                            form.action = "/superadmin/customer/activate/" + login_id;

                                                            // Append a hidden input for login_id
                                                            var loginIdInput = document.createElement('input');
                                                            loginIdInput.type = 'hidden';
                                                            loginIdInput.name = 'login_id';
                                                            loginIdInput.value = login_id;
                                                            form.appendChild(loginIdInput);

                                                            // Append the form to the document body
                                                            document.body.appendChild(form);

                                                            // Submit the form
                                                            form.submit();
                                                        }
                                                    });
                                                }
                                            </script>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </main>

{% include "footer.html" %}